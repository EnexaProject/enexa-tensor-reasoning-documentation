\begin{tikzpicture}[scale=0.3,thick] % , baseline = -3.5pt

\node[anchor=center] (text) at (-30,-2) {\small $\sum_{\atomlegindexof{\exrandom}} \, \condprobof{X=\atomlegindexof{\exrandom}}{Y=\atomlegindexof{\secexrandom}} \quad {=}$};

\draw (-21,-1) rectangle (-15,-3);
\node[anchor=center] (text) at (-18,-2) {\small $\condprobof{X}{Y}$};
\draw[->]  (-20,-3)--(-20,-5) node[midway,left] {\tiny $X$}; 

\draw[<-]  (-16,-3)--(-16,-5) node[midway,left] {\tiny $Y$}; 
\draw[] (-15,-5) rectangle (-17,-7); 
\node[anchor=center] (text) at (-16,-6) {\small $\onehotmapof{\catindexof{Y}}$};

\draw (-21,-5) rectangle (-19,-7); 
\node[anchor=center] (text) at (-20,-6) {$\ones$};

\node[anchor=center] (text) at (-13,-2) {${=}$};


\begin{scope}[shift={(0,6)}]

\draw (-11,-1) rectangle (-5,-3);
\node[anchor=center] (text) at (-8,-2) {\small $\probof{X,Y}$};
\draw[->]  (-10,-3)--(-10,-5) node[midway,left] {\tiny $X$}; 
\draw (-11,-5) rectangle (-9,-7); 
\node[anchor=center] (text) at (-10,-6) {$\ones$};
\draw[->]  (-6,-3)--(-6,-5) node[midway,left] {\tiny $Y$};
\draw[] (-7,-5) rectangle (-5,-7); 
\node[anchor=center] (text) at (-6,-6) {\small $\onehotmapof{\catindexof{Y}}$};

\end{scope}

\draw (-12,-2) -- (-4,-2);

\begin{scope}[shift={(0,-2)}]

\draw (-11,-1) rectangle (-5,-3);
\node[anchor=center] (text) at (-8,-2) {\small $\probof{X,Y}$};
\draw[->]  (-10,-3)--(-10,-5) node[midway,left] {\tiny $X$}; 
\draw (-11,-5) rectangle (-9,-7); 
\node[anchor=center] (text) at (-10,-6) {$\ones$};
\draw[->]  (-6,-3)--(-6,-5) node[midway,left] {\tiny $Y$};
\draw[] (-7,-5) rectangle (-5,-7); 
\node[anchor=center] (text) at (-6,-6) {\small $\onehotmapof{\catindexof{Y}}$};

\end{scope}

%\node[anchor=center] (text) at (-3,-2) {${=}$};
%
%\draw (-1,-3) rectangle (1,-1); 
%\node[anchor=center] (text) at (0,-2) {$\ones$};
%\draw[<-]  (0,-3)--(0,-5) node[midway,left] {\tiny $Y$};
%\draw[] (-1,-5) rectangle (1,-7); 
%\node[anchor=center] (text) at (0,-6) {\small $\onehotmapof{\catindexof{Y}}$};

\node[anchor=center] (text) at (-1,-2) {${=}\quad 1 \, .$};

%\node[anchor=center] (text) at (9,-7) {${.}$};

\end{tikzpicture}