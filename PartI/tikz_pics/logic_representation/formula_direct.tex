\begin{tikzpicture}[scale=0.35, thick] % , baseline = -3.5pt

%\draw[->-] (2,-1)--(2,1) node[midway,right] {\tiny $\catvariableof{\exformula}$};
\draw (-1,-1) rectangle (5,-3);
\node[anchor=center] (text) at (2,-2) {\small ${\exformula}$};
\draw[] (0,-3)--(0,-5) node[midway,left] {\tiny $\randomxof{0}$}; 
\draw[] (1.5,-3)--(1.5,-5) node[midway,left] {\tiny $\randomxof{1}$}; 
\node[anchor=center] (text) at (3,-4) {$\cdots$};
\draw[] (4,-3)--(4,-5) node[midway,right] {\tiny $\randomxof{\atomorder\shortminus1}$}; 


\node[anchor=center] (text) at (7,-2) {${=}$};

\node[anchor=center] (text) at (12,-2.5) {${\sum\limits_{\atomindices\in\atomstates}}$};
\node[anchor=center] (text) at (12,-4) {\tiny $\exformula(\atomindices)=1$};

\begin{scope}[shift={(19.5,1)}]

%\draw (-2,1) rectangle (4,-1);
%\node[anchor=center] (text) at (1,0) {\small $\onehotmapof{\exformula(\atomindices)}$};
%\draw[->-] (1,1)--(1,3) node[midway,right] {\tiny $\catvariableof{\exformula}$};

\draw (-3,-2) rectangle (-1,-4);
\node[anchor=center] (text) at (-2,-3) {\small $\onehotmapof{\atomlegindexof{0}}$};
\draw[->-] (-2,-4)--(-2,-6) node[midway,right] {\tiny $\catvariableof{0}$};

\node[anchor=center] (text) at (1,-3) {\small $\cdots$};

\draw (3,-2) rectangle (5,-4);
\node[anchor=center] (text) at (4,-3) {\small $\onehotmapof{\atomlegindexof{\atomorder\shortminus1}}$};
\draw[->-] (4,-4)--(4,-6) node[midway,right] {\tiny $\catvariableof{\atomorder\shortminus1}$};

\end{scope}

\end{tikzpicture}