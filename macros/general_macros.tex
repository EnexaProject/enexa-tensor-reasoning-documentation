\newcommand{\var}[1]{\text{\emph{#1}}}

\newcommand{\synencodingof}[1]{S\left(#1\right)} % Syntax encoding!
\newcommand{\stringof}[1]{"#1"}

% Text Macros
\newcommand{\python}{$\mathrm{python}$ }
\newcommand{\tnreason}{$\mathrm{tnreason}$ }
\newcommand{\spengine}{$\mathrm{engine}$ }
\newcommand{\spencoding}{$\mathrm{encoding}$ }
\newcommand{\spalgorithms}{$\mathrm{algorithms}$ }
\newcommand{\spknowledge}{$\mathrm{knowledge}$ }

\newcommand{\layeronespec}{\textbf{Layer 1}: Storage and manipulations}
\newcommand{\layertwospec}{\textbf{Layer 2}: Specification of workload}
\newcommand{\layerthreespec}{\textbf{Layer 3}: Applications in reasoning}

\newcommand{\rdf}{\mathrm{RDF}}
\newcommand{\rdftype}{$\mathrm{rdf}$:$\mathrm{type}$}

\newcommand{\true}{$\mathrm{true}$}
\newcommand{\false}{$\mathrm{false}$}
\newcommand{\truesymbol}{\mathrm{True}}
\newcommand{\falsesymbol}{\mathrm{False}}
\newcommand{\truthset}{\{\falsesymbol,\truesymbol\}}
\newcommand{\truthstate}{z}
\newcommand{\truthstateof}[1]{\truthstate_{#1}}
\newcommand{\ozset}{\{0,1\}}
\newcommand{\ozbasisset}{\{\fbasisat{\catvariable},\tbasisat{\catvariable}\}}

\newenvironment{centeredcode}
    {\begin{center}\begin{algorithmic}\hspace{1cm}}
    {\end{algorithmic}\end{center}}

\newcommand{\algdefsymbol}{\leftarrow}
\newcommand{\proofrightsymbol}{"$\Rightarrow$"}
\newcommand{\proofleftsymbol}{"$\Leftarrow$"}

\newcommand{\defref}[1]{Def.~\ref{#1}}
\newcommand{\theref}[1]{The.~\ref{#1}}
\newcommand{\lemref}[1]{Lem.~\ref{#1}}
\newcommand{\algoref}[1]{Algorithm~\ref{#1}}
\newcommand{\probref}[1]{Problem~\ref{#1}}
\newcommand{\exaref}[1]{Example~\ref{#1}}
\newcommand{\parref}[1]{Part~\ref{#1}}
\newcommand{\charef}[1]{Chapter~\ref{#1}}
\newcommand{\secref}[1]{Sect.~\ref{#1}}
\newcommand{\figref}[1]{Figure~\ref{#1}}

\newcommand{\probtagtypeinst}[2]{\mathrm{P}^{#1}_{#2}}

\newcommand{\probcolor}{red}
\newcommand{\concolor}{blue}
\newcommand{\inactivecolor}{gray}

\newcommand{\conjunctioncolor}{red}
\newcommand{\negationcolor}{blue}
\newcommand{\nodeminsize}{0.8cm}
\newcommand{\nodegrayscale}{gray!50}

% Basic Symbols
\newcommand{\entropysymbol}{\mathbb{H}}
\newcommand{\sentropyof}[1]{\entropysymbol\left[#1\right]}
\newcommand{\centropyof}[2]{\entropysymbol\left[#1,#2\right]}

\newcommand{\subspacedimof}[1]{\mathrm{dim}(#1)}


\newcommand{\subsphere}{\mathcal{S}}
\newcommand{\rr}{\mathbb{R}}
\newcommand{\nn}{\mathbb{N}}

\newcommand{\closureof}[1]{\overline{#1}}
\newcommand{\interiorof}[1]{{#1}^{\circ}}
\newcommand{\sbinteriorof}[1]{{\left(#1\right)}^{\circ}}

\newcommand{\difofwrt}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\difwrt}[1]{\difofwrt{}{#1}}
\newcommand{\gradwrt}[1]{\nabla_{#1}}
\newcommand{\gradwrtat}[2]{\nabla_{#1}|_{#2}}

\newcommand{\cardof}[1]{\left|#1\right|}
\newcommand{\absof}[1]{\left|#1\right|}

\newcommand{\imageof}[1]{\mathrm{im}\left(#1\right)}

\newcommand{\convhullof}[1]{\mathrm{conv}\left(#1\right)}
\newcommand{\cubeof}[1]{[0,1]^{#1}}
\newcommand{\dimof}[1]{\mathrm{dim}\left(#1\right)}

\newcommand{\argmin}{\mathrm{argmin}}
\newcommand{\argmax}{\mathrm{argmax}}


% Help functions
\newcommand{\chainingfunction}{h}
\newcommand{\longchainingfunction}{h}

\newcommand{\greaterzerofunction}{\psi}
\newcommand{\greaterzeroof}[1]{\greaterzerofunction\left(#1\right)}

\newcommand{\nonzerofunction}{\chi}
\newcommand{\nonzeroof}[1]{\nonzerofunction\left(#1\right)}


% Probability distributions
\newcommand{\expof}[1]{\mathrm{exp}\left[#1\right]}
\newcommand{\probtensor}{\mathbb{P}}
\newcommand{\probtensorof}[1]{\probtensor^{#1}}
\newcommand{\secprobtensor}{\tilde{\mathbb{P}}}
\newcommand{\secprobat}[1]{\secprobtensor[#1]}

\newcommand{\probtensorset}{\Gamma}

\newcommand{\gendistribution}{\probtensor^*}
\newcommand{\gendistributionat}[1]{\gendistribution\left[#1\right]}
\newcommand{\currentdistribution}{\tilde{\probtensor}}

\newcommand{\probof}[1]{\probat{#1}} % Bad usage!
\newcommand{\probat}[1]{\probtensor\left[#1\right]} 
\newcommand{\probofat}[2]{\probtensor^{#1}\left[#2\right]} 
\newcommand{\probwith}{\probat{\shortcatvariables}}

\newcommand{\condprobof}[2]{\mathbb{P}\left[#1|#2\right]}
\newcommand{\margprobof}[2]{\probof{#1}}%{\mathbb{P}^{#2}\left[#1\right]} % OLD -> Use probof
\newcommand{\expectationof}[1]{\mathbb{E}\left[#1\right]}
\newcommand{\expectationofwrt}[2]{\mathbb{E}_{#2}\left[#1\right]}
\newcommand{\lnof}[1]{\ln \left[ #1 \right] }
\newcommand{\sgnormof}[1]{\left\|#1\right\|_{\psi_2}} % subgaussian
\newcommand{\normof}[1]{\left\|#1\right\|_{2}}

\newcommand{\spanof}[1]{\mathrm{span}\left(#1\right)}

\newcommand{\distof}[1]{\mathbb{P}^{#1}}

\newcommand{\ones}{\mathbb{I}}
\newcommand{\onesof}[1]{\ones^{#1}}
\newcommand{\onesat}[1]{\ones\left[#1\right]}
\newcommand{\zerosat}[1]{0\left[#1\right]}
\newcommand{\identity}{\delta}
\newcommand{\identityat}[1]{\identity\left[#1\right]}
\newcommand{\dirdeltaof}[1]{\delta^{#1}}

\newcommand{\indicatorofat}[2]{\ones_{#1}\left[#2\right]}

\newcommand{\exmatrix}{M}
\newcommand{\matrixat}[1]{\exmatrix[#1]}
\newcommand{\matrixofat}[2]{\exmatrix^{#1}\left[#2\right]}

\newcommand{\exvector}{V}
\newcommand{\vectorof}[1]{\exvector^{#1}}
\newcommand{\vectorat}[1]{\exvector[#1]}
\newcommand{\vectorofat}[2]{\exvector^{#1}[#2]}


\newcommand{\idrestrictedto}[1]{\restrictionofto{\mathrm{Id}}{#1}}



%% KNOWLEDGE GRAPH
\newcommand{\kg}{kg}
\newcommand{\kgreptensor}{\rencodingof{\kg}}

\newcommand{\kgtriple}[3]{\braket{#1,#2,#3}}
\newcommand{\exunarytriple}{\kgtriple{?\variableof{0}}{a}{C}}
\newcommand{\exbinarytriple}{\kgtriple{?\variableof{0}}{R}{?\variableof{1}}}

\newcommand{\sparql}{\mathrm{SPARQL}}

\newcommand{\sindex}{s}
\newcommand{\pindex}{p}
\newcommand{\oindex}{o}

\newcommand{\cindex}{c}
\newcommand{\rindex}{r}

\newcommand{\resourcenumber}{\variablelegdim}
\newcommand{\indexedkgreptensor}{\kgreptensor_{:\sindex\pindex\oindex}}

\newcommand{\exreptensor}{\ftensor}


% Propositional Logics: New square bracket notation
\newcommand{\formula}{f}
\newcommand{\formulaat}[1]{\formula\left[#1\right]}
\newcommand{\formulaof}[1]{\formula_{#1}}
\newcommand{\formulaofat}[2]{\formulaof{#1}\left[#2\right]}

\newcommand{\formulavar}{\headvariableof{\formula}}
\newcommand{\formulacc}{\rencodingof{\formula}} % computation core
\newcommand{\formulaccwith}{\rencodingofat{\formula}{\formulavar,\shortcatvariables}}

\newcommand{\enumformula}{\formulaof{\selindex}}
\newcommand{\enumformulaat}[1]{\enumformula\left[#1\right]}

\newcommand{\enumformulavar}{\headvariableof{\selindex}}

\newcommand{\enumformulacc}{\rencodingof{\enumformula}} % computation core
\newcommand{\enumformulaccwith}{\rencodingofat{\enumformula}{\enumformulavar,\shortcatvariables}}
\newcommand{\enumformulaac}{\actcoreof{\enumformula,\canparamat{\indexedselvariable}}}
\newcommand{\enumformulaacwith}{\actcoreofat{\enumformula,\canparamat{\indexedselvariable}}{\headvariableof{\enumformula}}}



\newcommand{\exformula}{\formula}
\newcommand{\exformulavar}{\headvariableof{\exformula}}

\newcommand{\formulazerocoordinates}{\shortcatindices\,:\,\formulaat{\shortcatindices}=0}
\newcommand{\formulaonecoordinates}{\shortcatindices\,:\,\formulaat{\shortcatindices}=1}

\newcommand{\texformula}{\tilde{\exformula}}

\newcommand{\secexformula}{h} % Since g is atom
\newcommand{\secexformulavar}{\headvariableof{\secexformula}}

\newcommand{\exformulain}{\exformula\in\formulaset}
\newcommand{\exformulaof}[1]{\exformula\left(#1\right)}

\newcommand{\formulasuperset}{\mathcal{H}}

% First order Logics
\newcommand{\folexformula}{q}
\newcommand{\headfolexformula}{\tilde{\folexformula}} % When representing \folexformula as \importancequery \rightarrow \headfolexformula
\newcommand{\folformulaset}{\mathcal{Q}}
\newcommand{\folexformulain}{\folexformula\in\folformulaset}

\newcommand{\folpredicate}{g}
\newcommand{\folpredicateof}[1]{\folpredicate_{#1}}
\newcommand{\folpredicates}{\folpredicateof{0},\ldots,\folpredicateof{\folpredicateorder-1}}
\newcommand{\folpredicateenumerator}{\atomenumerator} % Due to PL being a special case
\newcommand{\folpredicateorder}{\atomorder}

\newcommand{\worlddomain}{A}
\newcommand{\exindividual}{a}
\newcommand{\secindividual}{b}
\newcommand{\exindividualof}[1]{\exindividual_{#1}}

\newcommand{\atombasemeasure}{\mu}

%\newcommand{\individualset}{\variableset}

\newcommand{\individuals}{\exindividualof{\indindexof{0}},\ldots,\exindividualof{\indindexof{\individualorder-1}}}


\newcommand{\individualsof}[1]{\exindividualof{0}^{#1},\ldots,\exindividualof{\individualorder-1}^{#1}} % Do not use, index already in individuals

%\newcommand{\individualsspace}{\bigotimes_{\individualenumeratorin}\rr^{\cardof{\individualset}}}







%% Redundant to individual variables
\newcommand{\individualvariable}{\indvariable}
\newcommand{\individualvariableof}[1]{\indvariableof{#1}}
\newcommand{\individualvariables}{\indvariablelist}


\newcommand{\individualorder}{\indorder}
\newcommand{\individualenumerator}{\indenumerator}
\newcommand{\individualenumeratorin}{\indenumeratorin}

\newcommand{\variableindex}{\indindex}
\newcommand{\variableindexof}[1]{\indindexof{#1}}
\newcommand{\variableenumerator}{\indenumerator}
\newcommand{\variableorder}{\indorder}
\newcommand{\variableenumeratorin}{\indenumeratorin}
\newcommand{\variableindices}{\indindexof{0}\ldots\indindexof{\indorder-1}}



% Tensor Representaion of functions: Outdated, since functions by definition tensors
\newcommand{\ftensor}{\theta}
\newcommand{\ftensorof}[1]{\rencodingof{#1}}





%\newcommand{\concore}{\theta} -> Relational Encoding in macros_tc
\newcommand{\concoreof}[1]{\concore^{#1}}

\newcommand{\exconnective}{\circ}
\newcommand{\connectiveof}[1]{\exconnective_{#1}}
\newcommand{\connectiveofat}[2]{\connectiveof{#1}\left[#2\right]}


\newcommand{\chadamard}{\circ}



\newcommand{\dataworld}{W}
\newcommand{\dataworldat}[1]{\dataworld[#1]}

\newcommand{\groundingofatwrt}[3]{{#1}|_{#3} \left[#2\right]}
\newcommand{\groundingofat}[2]{{#1}|_{\dataworld} \left[#2\right]}
\newcommand{\groundingof}[1]{{#1}|_{\dataworld}}
\newcommand{\kggroundingof}[1]{{#1}|_{\kg}}

\newcommand{\restrictionofto}[2]{{#1}|_{#2}}
\newcommand{\restrictionoftoat}[3]{\restrictionofto{#1}{#2}\left[#3\right]}

\newcommand{\gtensor}{\rho} % For decompositions
\newcommand{\gtensorof}[1]{\gtensor^{#1}}


\newcommand{\parametrization}{\rho}

%% For the TCalculus Theorem
\newcommand{\coordinatetrafo}{h}
\newcommand{\gentensor}{T}
\newcommand{\basisslices}{U}




% Parameters 


\newcommand{\candidatelist}{\mathcal{M}}
\newcommand{\candidatelistof}[1]{\candidatelist^{#1}}

\newcommand{\aselectionvariable}{L}
\newcommand{\aselectionvariableof}[1]{\aselectionvariable_{#1}}


%% OUTDATED IN MAINLINE
\newcommand{\atomlegdim}{p} %% Not needed: This is 2
\newcommand{\atomlegdimof}[1]{\atomlegdim_{#1}}
\newcommand{\atomlegset}{\mathcal{M}}
\newcommand{\atomlegsetof}[1]{\atomlegset^{#1}}



% Data Extraction Spec
\newcommand{\impformula}{p}
\newcommand{\fixedimpformula}{\underline{\impformula}}
\newcommand{\fixedimpbm}{\basemeasure_{\fixedimpformula}}
\newcommand{\supportedworlds}{\dataworld \, : \, \groundingof{\impformula} = \fixedimpformula}

\newcommand{\extformula}{q}
\newcommand{\extformulaof}[1]{\extformula_{#1}}
\newcommand{\extformulas}{\extformulaof{0},\ldots,\extformulaof{\atomorder-1}}



% Old, redundant
\newcommand{\exquery}{\impformula}
\newcommand{\fixedexquery}{\fixedimpformula}
\newcommand{\atomicqueryof}[1]{\extformulaof{#1}}
\newcommand{\atomicqueries}{\extformulas}



\newcommand{\extractionrelation}{\exrelation}

\newcommand{\variableset}{A} % Still used in monomial decomposition, NOT for object sets!
\newcommand{\variablesetof}[1]{\variableset^{#1}}


\newcommand{\variable}{\exindividual}
\newcommand{\variableof}[1]{\exindividualof{#1}}

\newcommand{\formulaset}{\mathcal{F}}
\newcommand{\formulasetof}[1]{\formulaset_{#1}}

\newcommand{\secformulaset}{\tilde{\formulaset}}

\newcommand{\hardformulaset}{\kb}
\newcommand{\hfbasemeasure}{\basemeasureof{\hardformulaset}}
\newcommand{\hfbasemeasureat}[1]{\hfbasemeasure\left[#1\right]}
\newcommand{\softformulaset}{\formulaset}


% Formula Selecting
\newcommand{\fselector}{\fselectionmap} % OLD, use \fselectionmap

\newcommand{\larchitecture}{\mathcal{A}}
\newcommand{\larchitectureat}[1]{\larchitecture\left[#1\right]}

\newcommand{\inneuronset}{\mathcal{A}^{\mathrm{in}}}
\newcommand{\outneuronset}{\mathcal{A}^{\mathrm{out}}}

\newcommand{\lneuron}{\sigma}
\newcommand{\lneuronof}[1]{\lneuron_{#1}}
\newcommand{\lneuronat}[1]{\lneuron\left[#1\right]}
\newcommand{\lneuractivation}{\lneuron^{\larchitecture}}
\newcommand{\lneuractivationat}[1]{\lneuractivation\left[#1\right]}

\newcommand{\fsnn}{\fselectionmapof{\larchitecture}}
\newcommand{\fsnnat}[1]{\fsnn\left[#1\right]}


\newcommand{\sliceselectionmapofat}[2]{\fselectionmapofat{\land,#1}{#2}}
\newcommand{\sliceselectionmapat}[1]{\sliceselectionmapofat{\catorder,\sliceorder}{#1}}

\newcommand{\skeleton}{S}
\newcommand{\skeletonof}[1]{\skeleton\left(#1\right)}
\newcommand{\skeletontensor}{\ftensorof{\skeleton}} %OLD! Use skeleton

%\newcommand{\parameterspace}{\bigotimes_{\parenumeratorin} \rr^{\parlegdimof{\parenumerator}}}
\newcommand{\modelspace}{\bigotimes_{\atomenumeratorin} \rr^2}

\newcommand{\skeletoncore}{S}
\newcommand{\skeletoncoreof}[1]{\skeletoncore^{#1}}

\newcommand{\cselectionsymbol}{C}
\newcommand{\vselectionsymbol}{V}
\newcommand{\sselectionsymbol}{S}

\newcommand{\selinputvariable}{\selvariable} 
\newcommand{\cselinputvariable}{\selvariableof{\cselectionsymbol}}
\newcommand{\vselinputvariable}{\selvariableof{\vselectionsymbol}}

\newcommand{\fselectionmap}{\mathcal{H}}
\newcommand{\fselectionmapof}[1]{\fselectionmap_{#1}}
\newcommand{\fselectionmapat}[1]{\fselectionmap\left[#1\right]}
\newcommand{\fselectionmapofat}[2]{\fselectionmap_{#1}\left[#2\right]}

\newcommand{\cselectionmap}{\fselectionmapof{\cselectionsymbol}}
\newcommand{\cselectionmapat}[1]{\fselectionmapofat{\cselectionsymbol}{#1}}

\newcommand{\vselectionmap}{\fselectionmapof{\vselectionsymbol}}
\newcommand{\vselectionmapat}[1]{\fselectionmapofat{\vselectionsymbol}{#1}}
\newcommand{\vselectionheadvar}{\headvariableof{\vselectionsymbol}} % Replacing \catvariableof{\vselectionmap}

\newcommand{\sselectionmap}{\fselectionmapof{\sselectionsymbol}}
\newcommand{\sselectionmapat}[1]{\fselectionmapofat{\sselectionsymbol}{#1}}


\newcommand{\vselectionmapof}[1]{\fselectionmapof{\vselectionsymbol,#1}} % tb deleted!


\newcommand{\tranfselectionmap}{\fselectionmap^T}


% Input variables -> Use generic for target coordinates of sufficient statistics!
\newcommand{\selvariables}{\selvariableof{0},\ldots,\selvariableof{\selorder-1}}
\newcommand{\shortselvariables}{\selvariableof{[\selorder]}}

% OLD: To selection variables
\newcommand{\parorder}{\selorder} 
\newcommand{\parenumerator}{\selenumerator}
\newcommand{\parenumeratorin}{\selenumeratorin}
\newcommand{\parindex}{\selindex}
\newcommand{\parindexof}[1]{\selindexof{#1}}
\newcommand{\parindexin}{\selindex\in[\seldim]}
\newcommand{\parlegdim}{\seldim} 
\newcommand{\parlegdimof}[1]{\seldimof{#1}}



% Output variables - Following the catvariable convention
\newcommand{\seloutputvariable}{\randomx}
\newcommand{\cseloutputvariable}{\catvariableof{\cselectionsymbol}}
\newcommand{\vseloutputvariable}{\headvariableof{\vselectionsymbol}}

% Tensor Core Representation
\newcommand{\selectorcore}{{\rencodingof{\vselectionsymbol}}}
\newcommand{\selectorcoreof}[1]{\rencodingof{\vselectionmapof{#1}}} 

\newcommand{\selectorcomponentof}[1]{\hypercoreof{\vselectionsymbol_{#1}}} % Since not an relational encoding!
\newcommand{\selectorcomponentofat}[2]{\selectorcomponentof{#1}\left[#2\right]} 

%% OLD
\newcommand{\fselectionvariable}{\selvariable}
\newcommand{\vselectionvariable}{\fselectionvariable} % For variable selection
\newcommand{\vselectionvariables}{\fselectionvariable_0,\ldots,\fselectionvariable_{\parorder-1}}
\newcommand{\cselectionvariable}{\fselectionvariable_{\exconnective}} % For connective selection
\newcommand{\selectionvariables}{\{\fselectionvariable_0,\ldots,\fselectionvariable_{\parorder-1}\}}



\newcommand{\parindices}{\parindexof{0}\ldots\parindexof{\parorder-1}}
\newcommand{\parindicesin}{\{\parindexof{\parenumerator} \in [\parlegdimof{\parenumerator}] \, : \, \parenumeratorin\}}
\newcommand{\parstates}{\bigtimes_{\parenumeratorin}[\parlegdimof{\parenumerator}]}
\newcommand{\parspace}{\bigotimes_{\parenumeratorin}\rr^{\parlegdimof{\parenumerator}}}
\newcommand{\simpleparspace}{\rr^{\parlegdim}}

\newcommand{\unitvectoratof}[2]{e^{(#1)}_{#2}}
\newcommand{\parametrizingunittensor}{e_{\atomindices}} % Not required?


\newcommand{\fulltensor}{T}
\newcommand{\fullspace}{\parametrizingspace \otimes \variablespace}


\newcommand{\placeholder}{Z} %% When not used in formulas, take the set for it
\newcommand{\placeholderof}[1]{\placeholder^{#1}}

\newcommand{\atomicformula}{\catvariable}
\newcommand{\atomicformulaof}[1]{\catvariableof{#1}}
\newcommand{\atomicformulaofat}[2]{\catvariableof{#1}\left[#2\right]}
\newcommand{\atomicformulas}{\catvariableof{[\atomorder]}} %{\{\atomicformulaof{\atomenumerator} :  \atomenumeratorin \}}
\newcommand{\enumeratedatoms}{\atomicformulaof{0},\ldots,\atomicformulaof{\atomorder-1}}
\newcommand{\atomformulaset}{\formulasetof{\mlnatomsymbol}}


\newcommand{\clause}{Z^{\lor}}
\newcommand{\clauseof}[2]{\clause_{#1,#2}}
\newcommand{\clauseofat}[3]{\clauseof{#1}{#2}\left[#3\right]}
\newcommand{\maxtermof}[1]{\clause_{#1}}
\newcommand{\maxtermformulaset}{\formulasetof{\mlnmaxtermsymbol}}

\newcommand{\term}{Z^{\land}}
\newcommand{\termof}[2]{\term_{#1,#2}}
\newcommand{\termofat}[3]{\termof{#1}{#2}\left[#3\right]}
\newcommand{\mintermof}[1]{\term_{#1}}
\newcommand{\mintermofat}[2]{\mintermof{#1}\left[#2\right]}
\newcommand{\mintermformulaset}{\formulasetof{\mlnmintermsymbol}}

\newcommand{\indexedplaceholderof}[1]{\placeholderof{#1}_{\atomlegindexof{#1}}}
\newcommand{\indexedplaceholders}{\indexedplaceholderof{1},\ldots,\indexedplaceholderof{\atomorder}}


\newcommand{\atomorder}{d}
\newcommand{\secatomorder}{r}
\newcommand{\atomenumerator}{k}
\newcommand{\secatomenumerator}{l}

\newcommand{\atomenumeratorin}{\atomenumerator\in[\atomorder]}
\newcommand{\secatomenumeratorin}{\secatomenumerator\in[\secatomorder]}
\newcommand{\atomlegindex}{\catindex}
\newcommand{\tatomlegindex}{\tilde{\atomlegindex}}
\newcommand{\atomlegindexof}[1]{\atomlegindex_{#1}}
\newcommand{\tatomlegindexof}[1]{\tatomlegindex_{#1}}
\newcommand{\atomindices}{{\atomlegindexof{0},\ldots,\atomlegindexof{\atomorder-1}}}
\newcommand{\atomindicesin}{\atomindices\in\atomstates}

\newcommand{\atombasisvector}{e}
\newcommand{\indexedatombasisvectorof}[1]{\atombasisvector^{(#1)}_{\atomlegindexof{#1}}}

\newcommand{\truevectorat}[1]{\atombasisvector_1^{#1}}
\newcommand{\falsevectorat}[1]{\atombasisvector_0^{#1}}



%% OPTIMIZATION

\newcommand{\targettensor}{Y}
\newcommand{\importancetensor}{I}

%% MARKOV LOGIC NETWORK
\newcommand{\loss}{\mathcal{L}_{\datamap}}
\newcommand{\lossof}[1]{\loss\left(#1\right)}
\newcommand{\mlnformulaset}{\mathcal{F}}
\newcommand{\mlnformulain}{\exformula\in\mlnformulaset}
\newcommand{\weight}{\theta}
\newcommand{\weightof}[1]{\weight_{#1}}
\newcommand{\weightat}[1]{\weight[#1]}

\newcommand{\mlnparameters}{(\formulaset,\canparam)}
\newcommand{\mlnparameterswithout}{(\tilde{\formulaset},\canparamt)}
\newcommand{\mlntrueparameters}{(\formulaset^*,\weight^*)}


% Examples
\newcommand{\mlnatomsymbol}{[\catorder]}
\newcommand{\mlnmintermsymbol}{\land}
\newcommand{\mlnmaxtermsymbol}{\lor}




%\newcommand{\mlntensor}{\theta^*} % Should be dropped?

\newcommand{\partitionfunction}{\mathcal{Z}}
\newcommand{\secpartitionfunction}{\tilde{\mathcal{Z}}}
\newcommand{\partitionfunctionof}[1]{\partitionfunction{\left(#1\right)}}
\newcommand{\secpartitionfunctionof}[1]{\secpartitionfunction{\left(#1\right)}}


\newcommand{\mlnprob}{\probtensorof{\mlnparameters}}
\newcommand{\mlnprobat}[1]{\expdistofat{\mlnparameters}{#1}}
\newcommand{\mlnenergy}{\energytensorof{\mlnparameters}}

\newcommand{\folmlnparameters}{\folformulaset |_{\worlddomain},\weight , \basemeasure_{\fixedexquery}}

%% OLD
\newcommand{\mlnprobof}[2]{\probtensor^{(#2)}\left[#1\right]}

\newcommand{\activationof}[1]{A^{#1}}

\newcommand{\variablesum}{\frac{1}{\datanum}\sum_{\variableindex=1}^\datanum}
\newcommand{\formulasum}{\sum_{\mlnformulain}}

\newcommand{\mlntn}{\Theta}




% For Probabilistic Analysis

\newcommand{\kldivsymbol}{\mathrm{D}_{\mathrm{KL}}}
\newcommand{\kldivof}[2]{\kldivsymbol\left[ #1 || #2 \right]}
\newcommand{\kllossof}[1]{\kldivof{\expdistof{\ftensor^*}}{\expdistof{#1}}}



\newcommand{\noisetensor}{\eta}
\newcommand{\fluctuationtensor}{\eta}
\newcommand{\fluctof}[1]{\fluctuationtensor^{#1,\gendistribution,\datamap}}
\newcommand{\expfamfluctuation}{\fluctof{\sstat}}
\newcommand{\naivefluctuation}{\fluctof{\identity}}
\newcommand{\proposalfluctuation}{\fluctof{\proposalstat}}
\newcommand{\mlnfluctuation}{\fluctof{\mlnstat}}

\newcommand{\fprob}{p}
\newcommand{\fprobof}[1]{\fprob^{(#1)}}
\newcommand{\bidistof}[1]{B\left(#1\right)}
\newcommand{\widthwrtof}[2]{\omega_{#1}(#2)}
\newcommand{\widthatof}[2]{\widthwrtof{#1}{#2}}

\newcommand{\failprob}{\epsilon}
\newcommand{\precision}{\tau}
\newcommand{\maxgap}{\delta}

%% CONTRACTION 

\newcommand{\cost}{c}
\newcommand{\costof}[1]{\cost\left( #1 \right)}

\newcommand{\temperature}{t}
\newcommand{\invtemp}{\beta}
\newcommand{\currentstate}{\Theta}
\newcommand{\newstate}{\Theta^{\rm new}}


%% Hard Logic

\newcommand{\kb}{\mathcal{KB}}
\newcommand{\kbvar}{\headvariableof{\kb}}
\newcommand{\kbat}[1]{\kb\left[#1\right]}

\newcommand{\seckb}{\tilde{\kb}}
%\newcommand{\qvariable}{q} % query variable
\newcommand{\thing}{\mathrm{Thing}}
\newcommand{\nothing}{\mathrm{Nothing}}

%% Tensor Network Formats

\newcommand{\elformat}{\mathrm{EL}}
\newcommand{\cpformat}{\mathrm{CP}}

\newcommand{\htformat}{\mathrm{HT}}
\newcommand{\ttformat}{\mathrm{TT}}

\newcommand{\subspaceof}[1]{V^{#1}}

\newcommand{\contractionof}[2]{\left\langle #1\right\rangle \left[ #2 \right]}
\newcommand{\sbcontractionof}[2]{\contractionof{#1}{#2}}

\newcommand{\contraction}[1]{\contractionof{#1}{\varnothing}}
\newcommand{\sbcontraction}[1]{\contraction{#1}}
\newcommand{\normationofwrt}[3]{\left\langle #1\right\rangle \left[ #2 | #3 \right]}
\newcommand{\sbnormationofwrt}[3]{\normationofwrt{#1}{#2}{#3}}

\newcommand{\normationof}[2]{\normationofwrt{#1}{#2}{\varnothing}}
\newcommand{\sbnormationof}[2]{\sbnormationofwrt{#1}{#2}{\varnothing}}

\newcommand{\extnet}{\mathcal{T}^{\graph}} % [\catvariableof{\nodes}]
\newcommand{\secextnet}{\mathcal{T}^{\tilde{\graph}}} %[\catvariableof{\nodes}]
\newcommand{\extnetat}[1]{\extnet[#1]}

\newcommand{\objof}[1]{O\left(#1\right)}

\newcommand{\nodevariables}{\catvariableof{\nodes}}
\newcommand{\edgevariables}{\catvariableof{\edge}}
\newcommand{\extnetdist}{\normationof{\extnet}{\nodevariables}}


\newcommand{\extnetasset}{\{\hypercoreof{\edge}\, : \, \edge\in\edges\}}
\newcommand{\tnetof}[1]{\mathcal{T}^{#1}}
\newcommand{\tnetofat}[2]{\tnetof{#1}\left[#2\right]}
\newcommand{\exvariable}{\randomx}

%% Probability Representation
\newcommand{\randomx}{\catvariable}

\newcommand{\exrandom}{\catvariableof{0}}
\newcommand{\secexrandom}{\catvariableof{1}}
\newcommand{\thirdexrandom}{\catvariableof{2}}

\newcommand{\indexedexrandom}{\indexedcatvariableof{0}}
\newcommand{\indexedsecexrandom}{\indexedcatvariableof{1}}
\newcommand{\indexedthirdexrandom}{\thirdexrandom=\thirdexrandind} 

\newcommand{\exrandind}{\catindexof{0}}
\newcommand{\exranddim}{\catdimof{0}}

\newcommand{\secexrandind}{\catindexof{1}}
\newcommand{\secexranddim}{\catdimof{1}}

\newcommand{\thirdexrandind}{\catindexof{2}}

\newcommand{\randomxof}[1]{\randomx_{#1}} % In combination with atomenumerator or tenumerator
\newcommand{\randome}{E}
\newcommand{\randomeof}[1]{\randome_{#1}}
\newcommand{\tenumerator}{t}
\newcommand{\tdim}{T}
\newcommand{\tenumeratorin}{\tenumerator\in[\tdim]}

%% Exponential families
\newcommand{\expdistof}[1]{\probtensorof{#1}}
\newcommand{\expdistofat}[2]{\expdistof{#1}[#2]}
\newcommand{\expdist}{\probtensorof{(\sstat,\canparam,\basemeasure)}}
\newcommand{\expdistat}[1]{\expdist\left[#1\right]}
\newcommand{\stanexpdistof}[1]{\expdistof{(\sstat,#1,\basemeasure)}}
\newcommand{\mlnexpdistof}[1]{\expdistof{(\formulaset,#1,\basemeasure)}}

\newcommand{\expfamilyof}[1]{\Gamma^{#1}}
\newcommand{\expfamily}{\expfamilyof{\sstat,\basemeasure}}

\newcommand{\realizabledistsof}[1]{\Lambda^{#1}}
\newcommand{\hlnsetof}[1]{\realizabledistsof{#1,\elformat}}

\newcommand{\mnexpfamily}{\expfamilyof{\graph,\ones}} % The exponential family of Markov Networks on \graph
\newcommand{\mlnexpfamily}{\expfamilyof{\mlnstat,\ones}}

\newcommand{\basemeasure}{\nu}
\newcommand{\basemeasureof}[1]{\basemeasure^{#1}}
\newcommand{\basemeasureofat}[2]{\basemeasure^{#1}\left[#2\right]}
\newcommand{\basemeasureat}[1]{\basemeasure\left[#1\right]}

\newcommand{\secbasemeasure}{\tilde{\nu}}
\newcommand{\secbasemeasureat}[1]{\secbasemeasure\left[#1\right]}

%\newcommand{\sstat}{\tau} % sufficent statistics
\newcommand{\sstat}{\phi}
\newcommand{\secsstat}{\tilde{\sstat}}
\newcommand{\proposalstat}{\fselectionmap^T}
\newcommand{\mlnstat}{\formulaset}
\newcommand{\naivestat}{\identity}

\newcommand{\sstatcoordinateof}[1]{\sstat_{#1}}
\newcommand{\sstatcoordinate}{\sstatcoordinateof{\selindex}}
\newcommand{\sstatcoordinateofat}[2]{\sstat_{#1}\left[#2\right]}

\newcommand{\sstatheadvariables}{\headvariableof{[\seldim]}}

\newcommand{\sstatcc}{\rencodingof{\sstat}}
\newcommand{\sstatccwith}{\rencodingofat{\sstat}{\sstatheadvariables,\shortcatvariables}}
\newcommand{\sstatac}{\actcoreof{\sstatcoordinateof{\selindex},\canparamat{\indexedselvariable}}}
\newcommand{\sstatacwith}{\actcoreofat{\sstatcoordinateof{\selindex},\canparamat{\indexedselvariable}}{\headvariableof{\selindex}}}

\newcommand{\sstatcatof}[1]{\headvariableof{\sstatcoordinateof{#1}}}

\newcommand{\sstatindof}[1]{\catindexof{\sstatcoordinateof{#1}}}
\newcommand{\sencsstat}{\sencodingof{\sstat}}
\newcommand{\sencsstatat}[1]{\sencodingof{\sstat}\left[#1\right]}
\newcommand{\sencsstatwith}{\sencsstatat{\shortcatvariables,\selvariable}}

\newcommand{\sencfset}{\sencodingof{\formulaset}}
\newcommand{\sencfsetat}[1]{\sencfset\left[#1\right]}

\newcommand{\sencmlnstat}{\sencodingof{\mlnstat}}
\newcommand{\sencproposalstat}{\sencodingof{\proposalstat}}

\newcommand{\canparam}{\theta}
\newcommand{\canparamof}[1]{\canparam_{#1}}
\newcommand{\canparamat}[1]{\canparam\left[#1\right]}
\newcommand{\canparamofat}[2]{\canparamof{#1}\left[#2\right]}

\newcommand{\seccanparam}{\tilde{\canparam}}

\newcommand{\canparamwrtat}[2]{\canparamofat{#1}{#2}}
\newcommand{\estcanparam}{\hat{\canparam}}
\newcommand{\naivecanparam}{\tilde{\canparam}}
\newcommand{\naivecanparamat}[1]{\naivecanparam\left[#1\right]}

\newcommand{\canparamhypothesis}{\Gamma}
\newcommand{\canparamin}{\canparam\in\canparamhypothesis}

\newcommand{\expsolution}{\canparam^*}
\newcommand{\empsolution}{\canparam^{\datamap}}

\newcommand{\meanparam}{\mu}
\newcommand{\secmeanparam}{\tilde{\mu}}
\newcommand{\meanparamof}[1]{\meanparam_{#1}}
\newcommand{\meanparamat}[1]{\meanparam\left[#1\right]}
\newcommand{\meanparamofat}[2]{\meanparamof{#1}\left[#2\right]}


\newcommand{\meanrepprob}{\probtensor^{\meanparam}}

\newcommand{\meanset}{\mathcal{M}}
\newcommand{\meansetof}[1]{\meanset_{#1}}
\newcommand{\genmeanset}{\meanset_{\sstat,\basemeasure}}
\newcommand{\hlnmeanset}{\meanset_{\mlnstat,\basemeasure}}
\newcommand{\propmeanset}{\meanset_{\propstat,\ones}}

\newcommand{\normalvec}{a}
\newcommand{\normalbound}{b}
\newcommand{\normalvecofat}[2]{\normalvec_{#1}\left[#2\right]}
\newcommand{\normalboundof}[1]{\normalbound_{#1}}
\newcommand{\normalboundofat}[2]{\normalbound_{#1}\left[#2\right]}
\newcommand{\halfspaceparams}{\left( (\normalvecofat{i}{\selvariable},\normalboundof{i}) \, : \, i \in[n]\right)}
\newcommand{\facecondset}{\mathcal{I}}
\newcommand{\faceset}{Q}
\newcommand{\genfacesetof}[1]{\faceset^{#1}_{\sstat,\basemeasure}}

\newcommand{\datamean}{\meanparamof{\datamap}}
\newcommand{\datameanat}[1]{\datamean\left[#1\right]}

\newcommand{\genmean}{\meanparam^*}
\newcommand{\genmeanat}[1]{\genmean[#1]}

\newcommand{\currentmean}{\tilde{\meanparam}}


\newcommand{\cumfunctionwrt}[1]{A^{#1}}
\newcommand{\cumfunctionwrtof}[2]{\cumfunctionwrt{#1}\left(#2\right)}
\newcommand{\cumfunction}{\cumfunctionwrt{(\sstat,\basemeasure)}}
\newcommand{\cumfunctionof}[1]{\cumfunction(#1)}
\newcommand{\dualcumfunction}{\big(\cumfunction\big)^*}

\newcommand{\forwardmapwrt}[1]{F^{#1}}
\newcommand{\forwardmap}{\forwardmapwrt{(\sstat,\basemeasure)}}
\newcommand{\forwardmapwrtof}[2]{\forwardmapwrt{#1}(#2)}
\newcommand{\forwardmapof}[1]{\forwardmapwrtof{(\sstat,\basemeasure)}{#1}}

\newcommand{\backwardmapwrt}[1]{B^{#1}}
\newcommand{\backwardmap}{\backwardmapwrt{(\sstat,\basemeasure)}}
\newcommand{\backwardmapwrtof}[2]{\backwardmapwrt{#1}(#2)}
\newcommand{\backwardmapof}[1]{\backwardmapwrtof{(\sstat,\basemeasure)}{#1}}


\newcommand{\energytensor}{E}
\newcommand{\energytensorofat}[2]{\energytensor^{#1}[#2]}
\newcommand{\energytensorof}[1]{\energytensor^{#1}}
\newcommand{\energytensorat}[1]{\energytensor\left[#1\right]}
\newcommand{\expenergy}{\energytensorofat{(\sstat,\canparam,\basemeasure)}{\shortcatvariables}}
\newcommand{\expenergyat}[1]{\energytensorofat{(\sstat,\canparam,\basemeasure)}{#1}}

\newcommand{\energyhypothesis}{\Theta}
\newcommand{\energyhypothesisof}[1]{\energyhypothesis^{#1}}



\newcommand{\statenumerator}{\selindex} % Since statistics are selected by a single selection variable!
\newcommand{\statorder}{\seldim}  
\newcommand{\statenumeratorin}{\selindexin}
\newcommand{\parameterspace}{\rr^\seldim}

\newcommand{\essdistof}[1]{\mathbb{E}\sstat_{#1}} % expected sufficient statistics on distributions
\newcommand{\esspar}{\mathrm{ess}}
\newcommand{\essparof}[1]{\esspar\left(#1\right)} % expected sufficient statistics on distributions


%% Logical Reasoning
\newcommand{\kcore}{K}
\newcommand{\kcoreof}[1]{\kcore^{#1}}

\newcommand{\tbasis}{e_1}
\newcommand{\tbasisat}[1]{\tbasis\left[#1\right]}
\newcommand{\fbasis}{e_0}
\newcommand{\fbasisat}[1]{\fbasis\left[#1\right]}
\newcommand{\nbasis}{\ones}




\newcommand{\graph}{\mathcal{G}}
\newcommand{\graphof}[1]{\graph^{#1}}
\newcommand{\secgraph}{\tilde{\graph}}
\newcommand{\nodes}{\mathcal{V}}
\newcommand{\nodesof}[1]{\nodes^{#1}}
\newcommand{\innodes}{\nodesof{\mathrm{in}}}
\newcommand{\outnodes}{\nodesof{\mathrm{out}}}

\newcommand{\elgraph}{\graphof{\elformat}}
\newcommand{\maxgraph}{\graphof{\mathrm{max}}}

\newcommand{\prenodes}{\{\secnode \, : \, \secnode \prec \node, \secnode\neq\node\}}
\newcommand{\afternodes}{\{\secnode \, : \, \node \prec \secnode, \secnode\neq\node\}}

\newcommand{\incomingnodes}{\edge^{\mathrm{in}}}
\newcommand{\outgoingnodes}{\edge^{\mathrm{out}}}

\newcommand{\nodesa}{A}
\newcommand{\nodesb}{B}
\newcommand{\nodesc}{C}

\newcommand{\secnodes}{\tilde{\nodes}}
\newcommand{\thirdnodes}{\bar{\nodes}}
\newcommand{\node}{v}
\newcommand{\nodein}{\node\in\nodes}
\newcommand{\secnode}{\tilde{\node}}
\newcommand{\thirdnode}{\bar{\node}}

\newcommand{\edges}{\mathcal{E}}
\newcommand{\edgesof}[1]{\edges^{#1}}
\newcommand{\secedges}{\tilde{\edges}}
\newcommand{\edge}{e}
\newcommand{\edgeof}[1]{\edge_{#1}}
\newcommand{\secedge}{\tilde{\edge}}
\newcommand{\thirdedge}{\hat{\edge}}
\newcommand{\edgein}{\edge\in\edges}


\newcommand{\parentsof}[1]{\mathrm{Pa}(#1)}
\newcommand{\nondescendantsof}[1]{\mathrm{NonDes}(#1)}

\newcommand{\bnnodecore}{\hypercoreof{(\parentsof{\node},\{\node\})}}
\newcommand{\bnedges}{\{(\parentsof{\node},\{\node\}) \, : \, \nodein\}}

\newcommand{\extensor}{T}
\newcommand{\extensorspace}{\bigotimes_{\node\in\nodes}\rr^{\catdimof{\node}}}
\newcommand{\hypercore}{\extensor}
\newcommand{\hypercoreat}[1]{\extensor\left[#1\right]}
\newcommand{\hyperonecoordinates}{\shortcatindices \, : \, \hypercoreat{\indexedshortcatvariables} = 1}
\newcommand{\hyperzerocoordinates}{\shortcatindices \, : \, \hypercoreat{\indexedshortcatvariables} = 0}

\newcommand{\hypercoreof}[1]{\hypercore^{#1}}
\newcommand{\hypercoreofat}[2]{\hypercoreof{#1}\left[#2\right]}
\newcommand{\sechypercore}{\tilde{\extensor}}
\newcommand{\sechypercoreat}[1]{\sechypercore\left[#1\right]}

%% Factored System

\newcommand{\onehotmap}{e}
\newcommand{\onehotmapof}[1]{\onehotmap_{#1}}
\newcommand{\onehotmapofat}[2]{\onehotmap_{#1}\left[#2\right]}
\newcommand{\onehotmapto}[1]{\onehotmapof{#1}} % For encoding of sets, relations
\newcommand{\invonehotmapof}[1]{\onehotmap^{-1}(#1)}

\newcommand{\statevectorof}[1]{v_{#1}}
\newcommand{\statevectorofat}[2]{\statevectorof{#1}\left[#2\right]}

\newcommand{\sembedding}{\phi} % Selection Embedding
\newcommand{\sembeddingof}[1]{\sembedding^{#1}}

\newcommand{\facsystem}{\mathcal{F}}


% Greedy
\newcommand{\extendedformulaset}{\formulaset\cup\{\formula\}}
\newcommand{\extendedcanparam}{\tilde{\canparam}\cup\{\weightof{\formula}\}}

\newcommand{\exfunction}{f}
\newcommand{\exfunctiontargetspace}{\bigotimes_{l\in[p]}\rr^{\catdimof{l}}}
\newcommand{\exfunctiontargetvariables}{Y_0,\ldots,Y_{p-1}}

\newcommand{\secexfunction}{g}

\newcommand{\catleg}{\randomx}
\newcommand{\catlegof}[1]{\catleg_{#1}}


%% Message Passing
\newcommand{\cluster}{C}
\newcommand{\clusterof}[1]{\cluster_{#1}}
\newcommand{\clusterenumerator}{i}
\newcommand{\secclusterenumerator}{j}
\newcommand{\thirdclusterenumerator}{\tilde{j}}

\newcommand{\enc}{\clusterof{\clusterenumerator}}
\newcommand{\secenc}{\clusterof{\secclusterenumerator}}
\newcommand{\thirdenc}{\clusterof{\thirdclusterenumerator}}

\newcommand{\clusterorder}{n}
\newcommand{\clusterenumeratorin}{\clusterenumerator\in[\clusterorder]}

\newcommand{\upmes}[2]{\delta_{#1 \rightarrow #2}}
\newcommand{\downmes}[2]{\delta_{#2 \leftarrow #1}}

% Binary connective symbols
\newcommand{\impbincon}{\Rightarrow}
\newcommand{\eqbincon}{\Leftrightarrow}
\newcommand{\lpasbincon}{\triangleleft}

\newcommand{\notucon}{\lnot}
\newcommand{\iducon}{\mathrm{Id}}
\newcommand{\trueucon}{\mathrm{T}}

\newcommand{\indexinterpretation}{I}
\newcommand{\indexinterpretationof}[1]{\indexinterpretation^{#1}}
\newcommand{\indexinterpretationat}[1]{\indexinterpretation(#1)}
\newcommand{\indexinterpretationofat}[2]{\indexinterpretationof{#1}(#2)}

\newcommand{\rhsofat}[2]{b^{#1}\left[#1\right]}
