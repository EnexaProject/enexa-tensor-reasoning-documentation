\begin{tikzpicture}[scale=0.45, yscale=1.2, thick] % , baseline = -3.5pt

\begin{scope}[shift={(-15,0)}]

\node[anchor=center] (text) at (-3,6) {${a)}$};

	\node [circle, draw, thick, fill=gray!50] (T1) at (0,0) {\tiny $\atomicformulaof{0}$};
	\node [circle, draw, thick, fill=gray!50] (T2) at (3,0) {\tiny $\atomicformulaof{1}$};
	\node [circle, draw, thick, fill=gray!50] (T3) at (6,0) {\tiny $\atomicformulaof{2}$};
	\node [circle, draw, thick, fill=gray!50] (T4) at (9,0) {\tiny $\atomicformulaof{3}$};
	
	\node [circle, draw, thick, fill=gray!50] (ph) at (1.5,3) {\tiny $\headvariableof{\vselectionsymbol,0}$};%{\tiny $\placeholderof{0}$};
	\node [circle, draw, thick, fill=gray!50] (sel) at (-1.5,3) {\tiny $\selvariableof{\vselectionsymbol,0}$};
	
	\node [circle, draw, thick, fill=gray!50] (ph2) at (6,3) {\tiny  $\headvariableof{\vselectionsymbol,1}$};
	\node [circle, draw, thick, fill=gray!50] (sel2) at (9,3) {\tiny $\selvariableof{\vselectionsymbol,1}$};	
	

	\node [circle, draw, thick, fill=gray!50] (sel3) at (0.25,6) {\tiny $\selvariableof{\cselectionsymbol}$};
	\node [circle, draw, thick, fill=gray!50] (head) at (3.25,6) {\tiny $\headvariableof{\lneuron}$};

	\coordinate (S3) at (3.25,4.5);
	\draw[->] (S3) -- (head);
	\draw [->] (sel3) -- (S3);
	\draw [->] (ph2) -- (S3);
	\draw [->] (ph) -- (S3);
	
	\coordinate (S1) at (1.5,1.5);
	\draw[->] (S1) -- (ph);
	\draw [->] (T1) -- (S1);
	\draw [->] (T2) -- (S1);
	\draw [->] (T3) -- (S1);	
	
	\coordinate (S2) at (6,1.5);
	\draw[->] (S2) -- (ph2);
	\draw [->] (sel) -- (S1);		
	\draw [->] (sel2) -- (S2);

	\draw [->] (T2) -- (S2);
	\draw [->] (T3) -- (S2);	

	\draw [->] (T4) -- (S2);

%	\draw [->] (ph) -- (head);			
\end{scope}


\node[anchor=center] (text) at (-3,6) {${b)}$};

\draw (-1,1) rectangle (4, 4.5);
\node[anchor=center] (text) at (1.5,2.75) {\small $\rencodingof{\lneuron}$}; %{\small $\ftensorof{\placeholderof{0} \placeholderof{1} \placeholderof{2}}$};
\draw[->] (1.5,4.5)--(1.5,6) node[midway,right] {\tiny $\headvariableof{\lneuron}$}; %{\tiny $\catvariableof{\placeholderof{0} \placeholderof{1} \placeholderof{2}}$};

\draw[<-] (4,4)--(5.5,4) node[midway,above] {\tiny $\selvariableof{\vselectionsymbol,0}$}; 
\draw[<-] (4,2.75)--(5.5,2.75) node[midway,above] {\tiny $\selvariableof{\vselectionsymbol,1}$}; 
\draw[<-] (4,1.5)--(5.5,1.5) node[midway,above] {\tiny $\selvariableof{\cselectionsymbol}$}; 

\draw[<-] (-0.5,1)--(-0.5,-0.5) node[midway,left] {\tiny $\catvariableof{0}$}; 
\draw[<-] (0.75,1)--(0.75,-0.5) node[midway,left] {\tiny $\catvariableof{1}$}; 
\draw[<-] (2,1)--(2,-0.5) node[midway,left] {\tiny $\catvariableof{2}$}; 
\draw[<-] (3.25,1)--(3.25,-0.5) node[midway,left] {\tiny $\catvariableof{3}$}; 


\node[anchor=center] (text) at (6.5,2.75) {${=}$};


\draw (7.5,1) rectangle (10.5,2.5);
\node[anchor=center] (text) at (9,1.75) {\small $\selectorcoreof{0}$};
\draw[->] (9,2.5)--(9,3.5) node[midway,left] {\tiny $\headvariableof{\vselectionsymbol,0}$};

\draw[<-] (7.75,1)--(7.75,-0.5) node[midway,left] {\tiny $\catvariableof{0}$}; 
\draw[<-] (9,1)--(9,-0.5) node[midway,left] {\tiny $\catvariableof{1}$}; 
\draw[<-] (10.25,1)--(10.25,-0.5) node[midway,left] {\tiny $\catvariableof{2}$}; 
\draw[<-] (10.5,1.75)--(11.5,1.75) node[midway,above] {\tiny $\selvariableof{\vselectionsymbol,0}$}; 

\draw (12.5,1) rectangle (15.5,2.5);
\node[anchor=center] (text) at (14,1.75) {\small $\selectorcoreof{1}$};
\draw[->] (14,2.5)--(14,3.5) node[midway,left] {\tiny $\headvariableof{\vselectionsymbol,1}$};

\draw[<-] (12.75,1)--(12.75,-0.5) node[midway,left] {\tiny $\catvariableof{1}$}; 
\draw[<-] (14,1)--(14,-0.5) node[midway,left] {\tiny $\catvariableof{2}$}; 
\draw[<-] (15.25,1)--(15.25,-0.5) node[midway,left] {\tiny $\catvariableof{3}$}; 
\draw[<-] (15.5,1.75)--(16.5,1.75) node[midway,above] {\tiny $\selvariableof{\vselectionsymbol,1}$}; 

\draw (8.5,5) rectangle (14.5,3.5);
\node[anchor=center] (text) at (11.5,4.25) {\small $\rencodingof{\cselectionmap}$};
\draw[->] (11.5,5)--(11.5,6) node[midway,left] {\tiny $\headvariableof{\lneuron}$};  %{\tiny $\catvariableof{\placeholderof{0} \placeholderof{1} \placeholderof{2}}$};
\draw[<-] (14.5,4.25)--(15.5,4.25) node[midway,above] {\tiny $\selvariableof{\cselectionsymbol}$}; 

\end{tikzpicture}