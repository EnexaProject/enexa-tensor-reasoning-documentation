\usetikzlibrary{decorations.pathreplacing,shapes.geometric,calc}


\begin{tikzpicture}[scale=0.35, thick] % , baseline = -3.5pt

    %% Statistic Qubits
    %\draw[dashed] (-3,11.5) -- (22.5,11.5);

    \node[anchor=center] (text) at (-1,10) {$\headvariableof{\secexfunction\circ\exfunction,\insymbol}$};
    \node[anchor=center] (text) at (15,10) {$\headvariableof{\secexfunction\circ\exfunction,\outsymbol}$};

    %\draw (-1,9) rectangle (1,11);
    %\node[anchor=center] (text) at (0,10) {$\onehotmapof{0}$};
    \draw (1,10) -- (7.5,10);
    \draw (7.5,9) rectangle (10.5,11);
    \node[anchor=center] (text) at (9,10) {$\qcbencodingof{\secexfunction}$};
    \draw (10.5,10) -- (13,10);

    \draw (9,6) -- (9,9);
    \drawvariabledot{9}{6}
    %\drawvariabledot{9}{-1}

    %\node[rotate=45] at (7.5,8) {$\cdots$};
    %\node[rotate=45] at (7.5,1) {$\cdots$};

    %\node[anchor=center] (text) at (0,8.25) {$\vdots$};
%    \node[anchor=center] (text) at (-2,8) {$\headvariables$};

    \draw (-1,5) rectangle (1,7);
    \node[anchor=center] (text) at (0,6) {$\onehotmapof{0}$};
    \draw (1,6) -- (5,6);
    \draw (5,5) rectangle (7,7);
    \node[anchor=center] (text) at (6,6) {$\qcbencodingof{\exfunction}$};
    \draw (7,6) -- (13,6);
    \draw (13,5) rectangle (15,7);
    \node[anchor=center] (text) at (14,6) {$\ones$};


    \draw (6,-1) -- (6,5);
    \drawvariabledot{6}{3}
    \drawvariabledot{6}{-1}

    \draw (1,3) -- (13,3);

    \node[anchor=center] (text) at (3,1.25) {$\vdots$};
    \node[anchor=center] (text) at (-1,1) {$\catvariableof{[\atomorder],\insymbol}$};

    \node[anchor=center] (text) at (11,1.25) {$\vdots$};
    \node[anchor=center] (text) at (15,1) {$\catvariableof{[\atomorder],\outsymbol}$};

    \draw (1,-1) -- (13,-1);

    \node[anchor=center] (text) at (-5,4) {${=}$};

    \begin{scope}
        [shift={(-20,0)}]

        \node[anchor=center] (text) at (-1,10) {$\headvariableof{\secexfunction\circ\exfunction,\insymbol}$};
        \node[anchor=center] (text) at (12,10) {$\headvariableof{\secexfunction\circ\exfunction,\outsymbol}$};

        \draw (5.5,-1) -- (5.5,9);
        \drawvariabledot{5.5}{3}
        \drawvariabledot{5.5}{-1}

        %\draw (-1,9) rectangle (1,11);
        %\node[anchor=center] (text) at (0,10) {$\onehotmapof{0}$};
        \draw (1,10) -- (4.4,10);
        \draw (4.5,9) rectangle (6.5,11);
        \node[anchor=center] (text) at (5.5,10) {$\qcbencodingof{\secexfunction}$};
        \draw (6.5,10) -- (10,10);

        \draw (1,3) -- (10,3);

        \node[anchor=center] (text) at (3,1.25) {$\vdots$};
        \node[anchor=center] (text) at (-1,1) {$\catvariableof{[\atomorder],\insymbol}$};

        \node[anchor=center] (text) at (8,1.25) {$\vdots$};
        \node[anchor=center] (text) at (12,1) {$\catvariableof{[\atomorder],\outsymbol}$};

        \draw (1,-1) -- (10,-1);

    \end{scope}


\end{tikzpicture}