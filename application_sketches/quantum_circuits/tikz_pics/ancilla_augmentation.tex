\begin{tikzpicture}[scale=0.35,thick] % , baseline = -3.5pt

    \node[anchor=center] (text) at (28,1) {${b)}$};

    \begin{scope}
        [shift={(31,-7)}]

        \node[anchor=center] (text) at (-1,6.5) {$\avariableof{\insymbol}$};
        \node[anchor=center] (text) at (12,6.5) {$\avariableof{\outsymbol}$};

        \draw (5.5,1) -- (5.5,5.5);
        \drawvariabledot{5.5}{4}
        \drawvariabledot{5.5}{1}

        \draw (1,6.5) -- (2,6.5);
        \draw (2,5.5) rectangle (9,7.5);
        \node[anchor=center] (text) at (5.65,6.5) {$\qcbencodingof{\probtensor}$};
        \draw (9,6.5) -- (10,6.5);

        \draw[dashed] (0.5,5) -- (10.5,5);

        \draw (1,4) -- (10,4);

        \node[anchor=center] (text) at (3,2.75) {$\vdots$};
        \node[anchor=center] (text) at (-1,2.5) {$\catvariableof{[\atomorder],\insymbol}$};

        \node[anchor=center] (text) at (8,2.75) {$\vdots$};
        \node[anchor=center] (text) at (12,2.5) {$\catvariableof{[\atomorder],\outsymbol}$};

        \draw (1,1) -- (10,1);

    \end{scope}


    \node[anchor=center] (text) at (1,1) {${a)}$};

    \draw[->-] (4.5,-1) -- (4.5,1) node[midway, right]{$\avariable$};
    \draw (3,-1) rectangle (6,-4);
    \node[anchor=center] (text) at (4.5,-2.5) { $\secprobtensor$};

    \draw[->-] (3.5,-6) -- (3.5,-4);
    \node[anchor=center] (text) at (4.5,-4.75) {$\cdots$};
    \node[anchor=center] (text) at (4.5,-6) {$\shortcatvariables$};
    \draw[->-] (5.5,-6) -- (5.5,-4);

    \node[anchor=center] (text) at (8,-2.5) {${=}$};

    \begin{scope}
        [shift={(3,2)}]

        \node[anchor=center] (text) at (8,-4.5) {$\sum_{\shortcatindices}$};

        \draw[->-] (15,-1) -- (15,1) node[midway, right]{$\avariable$};
        \draw (10,-4) rectangle (20,-1);
        \node[anchor=center] (text) at (15,-2.5) {$\begin{bmatrix}
                                                       1 - \probat{\indexedshortcatvariables} \\
                                                       \probat{\indexedshortcatvariables}
        \end{bmatrix}$};

        \draw (13,-5) rectangle (17,-7);
        \node[anchor=center] (text) at (15,-6) {$\onehotmapof{\shortcatindices}$};
        \draw[->-] (13.5,-7) -- (13.5,-9);
        \node[anchor=center] (text) at (15,-7.4) {$\cdots$};
        \node[anchor=center] (text) at (15,-8.5) {$\shortcatvariables$};
        \draw[->-] (16.5,-7) -- (16.5,-9);

    \end{scope}

\end{tikzpicture}