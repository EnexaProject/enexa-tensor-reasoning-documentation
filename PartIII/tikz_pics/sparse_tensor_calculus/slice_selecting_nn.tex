\begin{tikzpicture}[thick, scale=0.35] % , baseline = -3.5pt

\drawatomindices{0}{-6}
\draw (-1,1) rectangle (5, -5);
\node[anchor=center] (text) at (2,-2) {$\fselectionmap$};

%\draw[->] (2,-1)--(2,1) node[midway,right] {\tiny ${\atomicformulaof{\parindexof{1}} \land \atomicformulaof{\parindexof{2}}}$}; 

\draw[<-] (5,0.5) -- (7,0.5) node[midway, above] {\tiny $\selvariableof{0,0}$};
\draw[<-] (5,-1)--(7,-1) node[midway,above] {\tiny $\selvariableof{0,1}$}; 
\node[anchor=center] (text) at (6,-1.75) {$\vdots$};
\draw[<-] (5,-3)--(7,-3) node[midway,below] {\tiny $\selvariableof{\sliceorder\shortminus1,0}$}; 
\draw[<-] (5,-4.5)--(7,-4.5) node[midway,below] {\tiny $\selvariableof{\sliceorder\shortminus1,1}$}; 

\draw (7,1) rectangle (9, -5);
\node[anchor=center] (text) at (8,-2) {$\canparam$};


		
\node[anchor=center] (text) at (12,-2) {${=}$};


\begin{scope}[shift={(17,8)}]

	\begin{scope}[shift={(0,-10)}]
	
		\draw (-1,7) rectangle (12, 9);	
		\node[anchor=center] (text) at (5.5,8) {$\land$};
		
		% First leg selector
		\draw[->] (1,5) -- (1,7) node[midway, right] {\tiny $\catvariableof{\lneuron_0}$};	
		\draw (-1,3) rectangle (3, 5);
		\node[anchor=center] (text) at (1,4) {$\rencodingof{\{\notucon,\iducon,\trueucon\}}$};
		
		\draw (3,4) -- (12,4);
		\draw[<-] (12,4) -- (14,4) node[midway, above] {\tiny $\selvariableof{0,0}$};
			
		% SelectorCores
		\draw[->] (1,1) -- (1,3) node[midway, left] {\tiny $\catvariableof{\vselectionsymbol,0}$};
		
		\draw (-1,1) rectangle (3, -1);
		\node[anchor=center] (text) at (1,0) {$\selectorcoreof{0}$};
		\draw (3,0) to[bend left=10]  (12,2.5);
		\draw[<-] (12,2.5) -- (14,2.5) node[midway, above] {\tiny $\selvariableof{0,1}$};
		
		\draw[<-] (0,-1)--(0,-3) node[midway,left] {\tiny $\catvariableof{0}$}; 
		\node[anchor=center] (text) at (1,-2) {$\cdots$};
		\draw[<-] (2,-1)--(2,-3) node[midway,right] {\tiny $\catvariableof{\atomorder\shortminus1}$}; 
		
		\node[anchor=center] (text) at (5.5,0) {$\cdots$};

		% Second leg selector
		\draw (10,5) --(10,7);
		\draw[->] (10,1) -- (10,5) node[midway, right] {\tiny $\catvariableof{\lneuron_{\sliceorder\shortminus 1}}$};	
		\draw (8,-1) rectangle (12, 1);
		\node[anchor=center] (text) at (10,0) {$\rencodingof{\{\notucon,\iducon,\trueucon\}}$};
		\draw[<-] (12,0) -- (14,0) node[midway, below] {\tiny $\selvariableof{\sliceorder\shortminus1,0}$};

%		\draw (9,-1) -- (9,1);
		\draw[->] (10,-3) -- (10,-1) node[midway, left] {\tiny $\catvariableof{\vselectionsymbol,1}$};
		\draw (8,-5) rectangle (12, -3);
		\node[anchor=center] (text) at (10,-4) {$\selectorcoreof{\sliceorder-1}$};
		\draw[<-] (12,-4) -- (14,-4) node[midway, below] {\tiny $\selvariableof{\sliceorder\shortminus1,1}$};
		
		
%		\draw[<-] (9,-1)--(9,-3) node[midway,left] {\tiny $\catvariableof{0}$}; 
%		\node[anchor=center] (text) at (1,-2) {$\cdots$};
%		\draw[<-] (11,-1)--(11,-3) node[midway,right] {\tiny $\catvariableof{\atomorder\shortminus1}$}; 
		%\drawatomindices{7}{-4}	
		
		
		
		% ParameterCores
		\draw (14,5) rectangle (16, -5);
		\node[anchor=center] (text) at (15,0) {$\canparam$};
		
		\node[anchor=center] (text) at (13,1.5) {$\vdots$};
		
		
		\drawvariabledot{7.5}{-7}
		\drawvariabledot{3.5}{-7}

		\draw[] (3.5,-7) to[bend left=25] (0,-3);
		\draw[->] (3.5,-7) to[bend right=10] (9,-5);
		
		\draw[] (7.5,-7) to[bend left=10] (2,-3);
		\draw[->] (7.5,-7) to[bend right=25] (11,-5);


		\draw[->] (3.5,-9)--(3.5,-7) node[midway,left] {\tiny $\catvariableof{0}$}; 
		\node[anchor=center] (text) at (5.5,-8) {$\cdots$};
		\draw[->] (7.5,-9)--(7.5,-7) node[midway,right] {\tiny $\catvariableof{\atomorder\shortminus1}$}; 
		
%		\begin{scope}[shift={(-3.5,8)}]
%			\draw[fill] (7.5,-15) circle (0.25cm);
%			\draw[] (7.5,-15) to[bend left=25] (3.5,-13);
%			\draw[] (7.5,-15) to[bend right=25] (10.5,-13);
%
%			%\draw[fill] (9,-15.25) circle (0.25cm);
%			%\draw[] (9,-15.25) to[bend left=25] (5,-13);
%			%\draw[] (9,-15.25) to[bend right=25] (12,-13);
%
%			\draw[fill] (11.5,-15) circle (0.25cm);
%			\draw[] (11.5,-15) to[bend left=25] (7.5,-13);
%			\draw[] (11.5,-15) to[bend right=25] (14.5,-13);
%
%			%\drawatomindices{7.5}{-16}
%
%		\end{scope}
	
	\end{scope}

\end{scope}

\end{tikzpicture}